# ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π —á–µ–∫–ª–∏—Å—Ç: –î–µ–ø–ª–æ–π –Ω–∞ Vercel + Telegram Mini App

## üéØ –¶–µ–ª—å
–†–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ø—Ä–æ–µ–∫—Ç –Ω–∞ Vercel, –ø–æ–ª—É—á–∏—Ç—å URL –∏ —Å–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞ —Å Mini App.

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

### Backend (API)
- ‚úÖ `api/index.ts` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Vercel
- ‚úÖ `vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è serverless —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ `src/app.ts` - Express –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≤—Å–µ–º–∏ –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
- ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≥–æ—Ç–æ–≤—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å e-Replika

### Frontend (Web)
- ‚úÖ `web/vercel.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Vite
- ‚úÖ `web/src/utils/telegram.ts` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
- ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≥–æ—Ç–æ–≤—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –í—Å–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ GitHub
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é –æ—à–∏–±–æ–∫

## üìã –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### 1. Backend –ø—Ä–æ–µ–∫—Ç –≤ Vercel

- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ Vercel —Å –∏–º–µ–Ω–µ–º `prayer-debt-api`
- [ ] Root Directory: `.` (–∫–æ—Ä–µ–Ω—å)
- [ ] Framework Preset: `Other`
- [ ] Build Command: –ø—É—Å—Ç–æ
- [ ] Output Directory: –ø—É—Å—Ç–æ
- [ ] Environment Variables –¥–æ–±–∞–≤–ª–µ–Ω—ã:
  - [ ] `SUPABASE_URL`
  - [ ] `SUPABASE_ANON_KEY`
  - [ ] `SUPABASE_SERVICE_ROLE_KEY`
  - [ ] `EREPLIKA_BASE_URL`
  - [ ] `EREPLIKA_API_KEY`
  - [ ] `API_BASE_URL` (–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è)
  - [ ] `PORT=4000`
  - [ ] `CALC_VERSION=1.0.0`
  - [ ] `MADHAB=hanafi`
- [ ] –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω
- [ ] Backend URL –ø–æ–ª—É—á–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://prayer-debt-api.vercel.app`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω endpoint `/` - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å endpoints

### 2. Frontend –ø—Ä–æ–µ–∫—Ç –≤ Vercel

- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ–µ–∫—Ç –≤ Vercel —Å –∏–º–µ–Ω–µ–º `prayer-debt-web`
- [ ] Root Directory: `web` ‚ö†Ô∏è **–í–ê–ñ–ù–û!**
- [ ] Framework Preset: `Vite`
- [ ] Build Command: `npm run build`
- [ ] Output Directory: `dist`
- [ ] Environment Variables –¥–æ–±–∞–≤–ª–µ–Ω—ã:
  - [ ] `VITE_API_URL=https://prayer-debt-api.vercel.app/api` (URL –≤–∞—à–µ–≥–æ backend)
- [ ] –î–µ–ø–ª–æ–π —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à—ë–Ω
- [ ] Frontend URL –ø–æ–ª—É—á–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://prayer-debt-web.vercel.app`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω –≤ –±—Ä–∞—É–∑–µ—Ä–µ - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

- [ ] –í backend –ø—Ä–æ–µ–∫—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω `API_BASE_URL` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL backend
- [ ] –í frontend –ø—Ä–æ–µ–∫—Ç–µ –æ–±–Ω–æ–≤–ª—ë–Ω `VITE_API_URL` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π URL backend + `/api`
- [ ] –û–±–∞ –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–µ–Ω—ã –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

## ü§ñ –°–æ–∑–¥–∞–Ω–∏–µ Telegram –±–æ—Ç–∞ —Å Mini App

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather

1. –û—Ç–∫—Ä–æ–π—Ç–µ Telegram –∏ –Ω–∞–π–¥–∏—Ç–µ **@BotFather**
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É: `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º:
   - –í–≤–µ–¥–∏—Ç–µ –∏–º—è –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `Prayer Debt Calculator`)
   - –í–≤–µ–¥–∏—Ç–µ username –±–æ—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `prayer_debt_bot`)
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ **Bot Token** (–ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø–æ–∑–∂–µ)

### –®–∞–≥ 2: –°–æ–∑–¥–∞–π—Ç–µ Mini App

1. –í @BotFather –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É: `/newapp` –∏–ª–∏ `/newappshort`
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –∏–∑ —Å–ø–∏—Å–∫–∞
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ:
   - **Title**: `–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –Ω–∞–º–∞–∑—ã (–ö–∞–∑–∞)`
   - **Description**: `–†–∞—Å—á—ë—Ç –∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –Ω–∞–º–∞–∑–æ–≤`
   - **Photo**: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∑–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - **Web App URL**: `https://prayer-debt-web.vercel.app` (–≤–∞—à frontend URL)
   - **Short name**: (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∫–æ—Ä–æ—Ç–∫–æ–µ –∏–º—è –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

4. –ù–∞–∂–º–∏—Ç–µ **Done**

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ Mini App

1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É **"Open App"** –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `/start`
3. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram

## üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### Backend –ø—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://your-backend.vercel.app/`

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è:
```json
{
  "message": "Prayer Debt Calculator API",
  "version": "1.0.0",
  "endpoints": {
    "prayerDebt": "/api/prayer-debt",
    "webhooks": "/api/webhooks",
    "duas": "/api/duas",
    "ai": "/api/ai",
    "goals": "/api/goals",
    "glossary": "/api/glossary",
    "prayerCalendar": "/api/prayer-calendar",
    "friends": "/api/friends"
  }
}
```

### Frontend –ø—Ä–æ–≤–µ—Ä–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: `https://your-frontend.vercel.app/`

–î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è:
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å "–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –Ω–∞–º–∞–∑—ã (–ö–∞–∑–∞)"
- ‚úÖ –ó–µ–ª—ë–Ω—ã–π –¥–∏–∑–∞–π–Ω
- ‚úÖ –í–∫–ª–∞–¥–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–Ω—ã

### Telegram Mini App –ø—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏—Ç–µ "Open App"
3. –î–æ–ª–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π:
   - ‚úÖ –†–∞—Å—á—ë—Ç –¥–æ–ª–≥–∞
   - ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - ‚úÖ –í—Å–µ –≤–∫–ª–∞–¥–∫–∏ —Ä–∞–±–æ—Ç–∞—é—Ç

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –î–ª—è —Ä–∞–±–æ—Ç—ã –≤ Telegram Mini App

1. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - Vercel –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTPS –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚úÖ
2. **CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω** - –≤ `src/app.ts` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `origin: "*"` ‚úÖ
3. **Telegram WebApp API** - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –≤ `web/src/utils/telegram.ts` ‚úÖ
4. **User ID** - –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `x-user-id` ‚úÖ

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è:
- ‚úÖ Production
- ‚úÖ Preview
- ‚úÖ Development

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ Supabase RLS –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ Webhook –≤–∞–ª–∏–¥–∞—Ü–∏—è (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, —á–µ—Ä–µ–∑ `ENABLE_ENCRYPTION`)

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:

1. ‚úÖ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel
2. ‚úÖ Frontend —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ Vercel
3. ‚úÖ Telegram –±–æ—Ç —Å–æ–∑–¥–∞–Ω
4. ‚úÖ Mini App –ø–æ–¥–∫–ª—é—á–µ–Ω
5. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ Telegram

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **Vercel Dashboard**: https://vercel.com/dashboard
- **BotFather**: https://t.me/BotFather
- **Telegram Bot API**: https://core.telegram.org/bots/api
- **Telegram Mini Apps**: https://core.telegram.org/bots/webapps

---

**–í—Å—ë –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é! –°–ª–µ–¥—É–π—Ç–µ —á–µ–∫–ª–∏—Å—Ç—É –≤—ã—à–µ.** üöÄ

